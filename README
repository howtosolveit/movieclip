
***** 服务使用*****

步骤1: 安装或者创建使用的工具以及服务：
1 安装Python 3.11.2 以及扩展 pip3 install -U -r build/requirements.txt

2 ffmpeg version 7.1.1

3 创建Google Cloud Project 并 enable Google Cloud Vertex AI 服务。 使用的服务: 
  3.1 Gemini 2.5 Pro
  3.2 Chrip3

4 注册Minimax账户,使用t2a_v2服务，获取group id & api key 


步骤2:修改配置：
    入口: 需要修改.streamlit/secrets.toml为自己的对应配置
    1 Google Cloud相关:
        1.0 首先要创建project, 设置参数 PROJECT_ID & VOICE_CLONE_PROJECT_ID, 如果是同一个设置为相同的即可。
        1.1 请参考文档 https://cloud.google.com/iam/docs/keys-create-delete#creating 
          **** 创建service account key, 然后设置参数 SA_KEY_FILE_PATH为对应存储的路径 
        1.2 创建并设置存储桶,参考如下文档:
          **** https://cloud.google.com/storage/docs/creating-buckets ****
          **** 建议存储桶创建位置 和 LOCATION 设置为同一区域。****
    2 Minimax 
        3.1 使用minimax t2a_v2 请设置group id & api key

步骤3: 运行程序,执行如下命令:
   python3 -m streamlit run ui/pages/Main.py

界面操作：
  1 操作步骤：
    1.1 先提取剧情
    1.2 生成高光时刻视频
    1.3 生成旁白字幕
    1.4 旁白配音
  2 说明:
     2.1 原始视频可以上传文件或者提供gcs地址,同时存在使用gcs地址
     2.2 文件剧情提取耗时较高，需要先切片，然后上传gcs, 请耐心等待
     2.3 文件处理会有缓存,存储在 data目录,如有问题可以清空该目录



#授权说明： Gemini的授权方式有 ADC/SA/API_KEY, 目前仅支持service account key 
# 1 ADC: 请参考文档进行授权  
https://cloud.google.com/docs/authentication/set-up-adc-local-dev-environment#local-user-cred
# 2 SA : 请提供对应service account key的文件路径 SA_KEY_FILE_PATH
https://cloud.google.com/iam/docs/keys-create-delete#creating
#3 API KEY : 需要创建api key 
https://cloud.google.com/docs/authentication/api-keys#create